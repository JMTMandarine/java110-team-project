<?xml version="1.0" encoding="UTF-8"?>
<!-- MemberDao 클래스가 사용할 SQL이 들어 있는 파일 -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="indiesker.java110.ms.dao.BuskerBoardDetailDao">


<resultMap type="Comment" id="comtList">
        <id column="bcno"  property="bcno"/>
        <result column="phot"    property="phot"/>
        <result column="nik"    property="nik"/>
        <result column="cont"    property="cont"/>
        <result column="cdt"    property="cdt"/>
</resultMap>


<select id="findbbno" resultType="BuskerBoardDetail" parameterType="int">
 SELECT bb.bbno
 ,bb.titl,b.name,bb.genre,bb.city,bb.sdt,bb.edt,bb.cnt,bb.etc,bb.flag,bb.phot
FROM busk_board bb, busk b 
WHERE bb.bno = b.bno
  AND bb.bbno=#{no}
</select>

<select id="comtList" resultMap="comtList" parameterType="Map">
SELECT m.phot, m.nik,bc.cdt,bc.cont
FROM memb as m, board_comt as bc , busk_board as bb
WHERE m.mno=bc.mno and bc.bbno = bb.bbno
AND bb.bbno=#{no}
order by  bc.cont desc

</select>
    
    
    
   
    
    
</mapper>

