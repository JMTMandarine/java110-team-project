<?xml version="1.0" encoding="UTF-8"?>
<!-- MemberDao 클래스가 사용할 SQL이 들어 있는 파일 -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="indiesker.java110.ms.dao.PerScheduleDao">

    <resultMap type="PerSchedule" id="perscheduleMap">
        <id column="psno"  property="psno"/>
        <result column="shopname"  property="shopname"/>
        <result column="addr"    property="addr"/>
        <result column="sdt"    property="sdt"/>
        <result column="edt"    property="edt"/>
        <result column="cnt"    property="cnt"/>
        <result column="cdt"    property="cdt"/>
        <result column="x"    property="y"/>
        <result column="y"    property="x"/>
    </resultMap>
    
    

    <select id="findAll" resultMap="perscheduleMap" parameterType="map">
       select PS.psno, PS.shopname, PS.addr,  PS.sdt, PS.edt, PS.cnt, PS.cdt, PS.x, PS.y  
         from per_sche PS, busk B 
        where PS.bno = B.bno   
       limit #{rowNo}, #{size}
    </select>
    
    <insert id="insert" parameterType="PerSchedule" useGeneratedKeys="true" keyColumn="psno" keyProperty="psno">
    insert into per_sche(sdt,edt,addr,x,y,shopname,cdt,cnt,bno) 
    values(#{nsdt},#{nedt},#{addr},#{x},#{y},#{shopname},now(),#{cnt},5)    
    </insert>
</mapper>









